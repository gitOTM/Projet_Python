<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G√©n√©rateur de Motifs</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
    <h1>G√©n√©rateur de Motifs G√©om√©triques</h1>

    <form method="POST" action="/submit">
        <label for="motif_type">Type de motif :</label>
        <select id="motif_type" name="motif_type" onchange="updateForm()">
            <option value="repetitive" selected>Forme r√©p√©titive</option>
            <option value="spiral">Spirale</option>
            <option value="random">Al√©atoire</option>
        </select>

        <div id="sideContainer">
            <label for="nb_side">Nombre de c√¥t√©s</label>
            <input type="text" id="nb_side" name="nb_side">
        </div>

        <div id="repet_or_depth_container">
            <label for="nb_repet" id="repet_label">Nombre de r√©p√©titions</label>
            <input type="text" id="nb_repet" name="nb_repet">
        </div>

        <label for="init_size">Taille initiale du motif</label>
        <input type="text" id="init_size" name="init_size">

        <div id="angle_container">
            <label for="rotation_angle">Angle de rotation entre chaque r√©p√©tition</label>
            <input type="text" id="rotation_angle" name="rotation_angle">
        </div>

        <label for="color">Couleur du motif (en anglais)</label>
        <select id="color" name="color">
            <option value="black" selected>Noir</option>
            <option value="white">Blanc</option>
            <option value="red">Rouge</option>
            <option value="green">Vert</option>
            <option value="blue">Bleu</option>
            <option value="yellow">Jaune</option>
            <option value="orange">Orange</option>
            <option value="purple">Violet</option>
            <option value="pink">Rose</option>
            <option value="brown">Marron</option>
            <option value="cyan">Cyan</option>
            <option value="magenta">Magenta</option>
            <option value="gray">Gris</option>
            <option value="lightblue">Bleu clair</option>
            <option value="lightgreen">Vert clair</option>
        </select>

        <input type="submit" value="G√©n√©rer le motif !">
    </form>

    {% if errors %}
        <ul class="error-list">
            {% for err in errors %}
                <li>{{ err }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if image_url %}
        <div class="image-block">
            <h2>Motif g√©n√©r√© :</h2>
            <img src="{{ image_url }}" alt="Motif g√©n√©r√©"><br>
            <a href="{{ image_url.split('?')[0] }}" download="motif.png" class="download-button">üì• T√©l√©charger l‚Äôimage</a>
        </div>
    {% endif %}
</div>

<script>
    function updateForm() {
        const motifType = document.getElementById("motif_type").value;
        const repetLabel = document.getElementById("repet_label");
        const angleContainer = document.getElementById("angle_container");
        const sideContainer = document.getElementById("sideContainer");

        if (motifType === "repetitive") {
            repetLabel.textContent = "Nombre de r√©p√©titions";
            angleContainer.style.display = "block";
            sideContainer.style.display = "block";
        } else if (motifType === "spiral") {
            repetLabel.textContent = "Profondeur";
            angleContainer.style.display = "none";
            sideContainer.style.display = "block";
        } else if (motifType === "random") {
            repetLabel.textContent = "Param√®tres al√©atoires";
            angleContainer.style.display = "none";
            sideContainer.style.display = "none";
            document.getElementById("nb_repet").style.display = "none";
            document.getElementById("init_size").style.display = "none";
            document.getElementById("color").style.display = "none";
        }
    }

    window.onload = updateForm;
</script>
</body>
</html>
